<html>
  <head>
    <script type="text/javascript" src="/sock.it/client.js"></script>
    <script type="text/javascript">
      // var sockit = new SockIt('/sock.it/');
      var sockit = new SockIt();
      sockit.onopen = function() {
        sockit.debug.client('Connection opened');
        sockit.debug.client(arguments);
        sockit.debug.client('readyState: '+this.readyState);

        sockit.debug.msgOut('Sending message:');
        sockit.debug.msgOut('first message to the server');
        sockit.send('first message to the server');
      };
      sockit.onclose = function() {
        socket.debug.client('SockIt connection closed');
        socket.debug.client(arguments);
        sockit.debug.client('readyState: '+this.readyState);
      };
      sockit.onerror = function() {
        sockit.debug.err('SockIt error:');
        sockit.debug.err(arguments);
        sockit.debug.err('readyState: '+this.readyState);
      };
      sockit.onmessage = function(message) {
        sockit.debug.msgIn('SockIt message received:');
        sockit.debug.msgIn(this.readyState);
        sockit.debug.msgIn(JSON.stringify(message));

        setTimeout(function() {
          sockit.debug.msgOut('Sending a reply:');
          sockit.debug.msgOut('a test message to the server');
          sockit.send('a test message to the server');
        }, 1000);

      };
    </script>
  </head>

  <body>
  </body>
</html>
